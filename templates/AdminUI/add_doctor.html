<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Doctor - Matrix HMS</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <!-- Navbar -->
    <nav class="navbar navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="{{ url_for('admin_dashboard') }}">Matrix HMS - Admin</a>
        </div>
    </nav>

    <div class="container my-5"
        style=" display: flex; align-items: center;">

        <div>
            <img src="/static/images/doctors graphic.png" height="400" width="auto">
        </div>
        <div class="card shadow-sm mx-auto" style="min-width: 500px;">
            <div class="card-header bg-primary text-white text-center">
                <h4>Add Doctor</h4>
            </div>
            <div class="card-body">
                <form action="{{ url_for('add_doctor') }}" method="POST">

                    <!-- Doctor Name -->
                    <div class="mb-3">
                        <label for="name" class="form-label">Doctor Name</label>
                        <input type="text" name="name" class="form-control" id="name" value="Dr. " required>
                    </div>

                    <!-- Doctor Email -->
                    <div class="mb-3">
                        <label for="email" class="form-label">Email Address</label>
                        <input type="email" name="email" class="form-control" id="email"
                            placeholder="Enter doctor's email" required>
                    </div>

                    <!-- Password -->
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" name="password" class="form-control" id="password"
                            placeholder="Set password for doctor" required>
                    </div>

                    <!-- Experience -->
                    <div class="mb-3">
                        <label for="experience" class="form-label">Years of Experience</label>
                        <input type="number" name="experience_years" min="0" class="form-control" id="experience"
                            placeholder="e.g., 5" required>
                    </div>

                    <!-- Department -->
                    <div class="mb-3">
                        <label for="department" class="form-label">Select Department</label>
                        <select name="department_name" id="department" class="form-select" required>
                            <option value="" disabled selected>-- Select Department --</option>
                            {% for dept in departments %}
                            <option value="{{ dept.department_name }}">{{ dept.department_name }}</option>
                            {% endfor %}
                            <option value="__new__">Add New Department</option>
                        </select>
                    </div>

                    <!-- New Department Field (hidden initially) -->
                    <div class="mb-3" id="newDeptField" style="display: none;">
                        <label for="new_department" class="form-label">New Department Name</label>
                        <input type="text" class="form-control" name="new_department" id="new_department"
                            placeholder="Enter new department name">
                    </div>

                    <!-- Submit Button -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary px-5">Add Doctor</button>
                        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary px-4">Cancel</a>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script to show/hide new department input -->
    <script>
        const deptSelect = document.getElementById('department');
        const newDeptField = document.getElementById('newDeptField');

        deptSelect.addEventListener('change', function () {
            if (this.value === '__new__') {
                newDeptField.style.display = 'block';
                document.getElementById('new_department').required = true;
            } else {
                newDeptField.style.display = 'none';
                document.getElementById('new_department').required = false;
            }
        });
    </script>

</body>

</html>
